{% extends "base.html" %}
{% block title %}Admin - CV{% endblock %}

{% block content %}
<h2>√âdition du CV</h2>

{% if get_flashed_messages() %}
    <p style="color:green;">{{ get_flashed_messages()[0] }}</p>
{% endif %}

<form method="post">
    <label>Nom</label><br>
    <input type="text" name="nom" value="{{ cv.nom }}"><br><br>

    <label>Titre</label><br>
    <input type="text" name="titre" value="{{ cv.titre }}"><br><br>

    <label>Profil</label><br>
    <textarea name="profil" rows="5">{{ cv.profil }}</textarea><br><br>

    <label>Comp√©tences (s√©par√©es par des virgules)</label><br>
    <input type="text" name="competences" value="{{ cv.competences | join(', ') }}"><br><br>

    <h3>Exp√©riences</h3>
    {% for i, exp in enumerate(cv.experiences) %}
        <fieldset>
            <legend>Exp√©rience {{ i + 1 }}</legend>
            <label>Poste</label><br>
            <input type="text" name="exp_poste_{{ i }}" value="{{ exp.poste }}"><br>
            <label>Entreprise</label><br>
            <input type="text" name="exp_entreprise_{{ i }}" value="{{ exp.entreprise }}"><br>
            <label>P√©riode</label><br>
            <input type="text" name="exp_periode_{{ i }}" value="{{ exp.periode }}"><br>
            <label>Description</label><br>
            <textarea name="exp_description_{{ i }}">{{ exp.description }}</textarea><br><br>
        </fieldset>
    {% endfor %}

    <h3>Formations</h3>
    {% for i, form in enumerate(cv.formations) %}
        <fieldset>
            <legend>Formation {{ i + 1 }}</legend>
            <label>Dipl√¥me</label><br>
            <input type="text" name="form_diplome_{{ i }}" value="{{ form.diplome }}"><br>
            <label>Lieu</label><br>
            <input type="text" name="form_lieu_{{ i }}" value="{{ form.lieu }}"><br>
            <label>P√©riode</label><br>
            <input type="text" name="form_periode_{{ i }}" value="{{ form.periode }}"><br>
            <label>Description</label><br>
            <textarea name="form_description_{{ i }}">{{ form.description }}</textarea><br><br>
        </fieldset>
    {% endfor %}

    <button type="submit">üíæ Sauvegarder</button>
</form>
{% endblock %}